<div class="container mt-5">
    <h2 >{{ 'sidenav.links.order_project' | translate }}</h2>
    <form [formGroup]="projectForm" (ngSubmit)="onSubmit()">
     
  
    <!-- Step 1: Client Information -->
<div *ngIf="currentStep === 0" class="card mb-3">
    <div class="card-header">{{ 'projectOrder.steps.clientInformation' | translate }}</div>
    <div class="card-body">
      <small class="text-muted">{{ 'projectOrder.mandatoryFieldsNote' | translate }}</small>
      <div class="row">
        <div class="col-md-6 form-group">
          <label for="clientName">{{ 'projectOrder.fields.clientName' | translate }} <span class="text-danger">*</span></label>
          <input type="text" class="form-control" id="clientName" formControlName="clientName" 
                 [ngClass]="{'is-invalid': projectForm.get('clientName')?.invalid && projectForm.get('clientName')?.touched}">
          <div class="invalid-feedback" *ngIf="projectForm.get('clientName')?.invalid && projectForm.get('clientName')?.touched">
            <span *ngIf="projectForm.get('clientName')?.errors?.['required']">{{ 'projectOrder.validation.clientNameRequired' | translate }}</span>
            <span *ngIf="projectForm.get('clientName')?.errors?.['maxlength']">{{ 'projectOrder.validation.maxLength' | translate }}</span>
          </div>
        </div>
        <div class="col-md-6 form-group">
          <label for="companyName">{{ 'projectOrder.fields.companyName' | translate }}</label>
          <input type="text" class="form-control" id="companyName" formControlName="companyName">
        </div>
        <div class="col-md-6 form-group">
          <label for="professionalStatus">{{ 'projectOrder.fields.professionalStatus' | translate }} <span class="text-danger">*</span></label>
          <input type="text" class="form-control" id="professionalStatus" formControlName="professionalStatus"
                 [ngClass]="{'is-invalid': projectForm.get('professionalStatus')?.invalid && projectForm.get('professionalStatus')?.touched}">
          <div class="invalid-feedback" *ngIf="projectForm.get('professionalStatus')?.invalid && projectForm.get('professionalStatus')?.touched">
            <span *ngIf="projectForm.get('professionalStatus')?.errors?.['required']">{{ 'projectOrder.validation.professionalStatusRequired' | translate }}</span>
            <span *ngIf="projectForm.get('professionalStatus')?.errors?.['maxlength']">{{ 'projectOrder.validation.maxLength' | translate }}</span>
          </div>
        </div>
        <div class="col-md-6 form-group">
          <label for="email">{{ 'projectOrder.fields.email' | translate }} <span class="text-danger">*</span></label>
          <input type="email" class="form-control" id="email" formControlName="email"
                 [ngClass]="{'is-invalid': projectForm.get('email')?.invalid && projectForm.get('email')?.touched}">
          <div class="invalid-feedback" *ngIf="projectForm.get('email')?.invalid && projectForm.get('email')?.touched">
            <span *ngIf="projectForm.get('email')?.errors?.['required']">{{ 'projectOrder.validation.emailRequired' | translate }}</span>
            <span *ngIf="projectForm.get('email')?.errors?.['email']">{{ 'projectOrder.validation.emailInvalid' | translate }}</span>
          </div>
        </div>
        <div class="col-md-6 form-group">
          <label for="phone">{{ 'projectOrder.fields.phone' | translate }} <span class="text-danger">*</span></label>
          <input type="tel" class="form-control" id="phone" formControlName="phone"
                 [ngClass]="{'is-invalid': projectForm.get('phone')?.invalid && projectForm.get('phone')?.touched}">
          <div class="invalid-feedback" *ngIf="projectForm.get('phone')?.invalid && projectForm.get('phone')?.touched">
            <span *ngIf="projectForm.get('phone')?.errors?.['required']">{{ 'projectOrder.validation.phoneRequired' | translate }}</span>
            <span *ngIf="projectForm.get('phone')?.errors?.['maxlength']">{{ 'projectOrder.validation.maxLength' | translate }}</span>
          </div>
        </div>
        <div class="col-md-12 form-group">
          <label for="linkedin">{{ 'projectOrder.fields.linkedin' | translate }}</label>
          <input type="url" class="form-control" id="linkedin" formControlName="linkedin" placeholder="https://www.linkedin.com/in/your-profile">
        </div>
      </div>
      
    </div>
  </div>
  
<!-- Step 2: Project Details -->
<div *ngIf="currentStep === 1" class="card mb-3">
    <div class="card-header">{{ 'projectOrder.steps.projectDetails' | translate }}</div>
    <div class="card-body">
      <small class="text-muted">{{ 'projectOrder.mandatoryFieldsNote' | translate }}</small>
      <div class="row">
        <div class="col-md-6 form-group">
          <label for="projectTitle">{{ 'projectOrder.fields.projectTitle' | translate }} <span class="text-danger">*</span></label>
          <input type="text" class="form-control" id="projectTitle" formControlName="projectTitle"
                 [ngClass]="{'is-invalid': projectForm.get('projectTitle')?.invalid && projectForm.get('projectTitle')?.touched}">
          <div class="invalid-feedback" *ngIf="projectForm.get('projectTitle')?.invalid && projectForm.get('projectTitle')?.touched">
            <span *ngIf="projectForm.get('projectTitle')?.errors?.['required']">{{ 'projectOrder.validation.projectTitleRequired' | translate }}</span>
            <span *ngIf="projectForm.get('projectTitle')?.errors?.['maxlength']">{{ 'projectOrder.validation.maxLength' | translate }}</span>
          </div>
        </div>
        <div class="col-md-6 form-group">
          <label for="projectType">{{ 'projectOrder.fields.projectType' | translate }} <span class="text-danger">*</span></label>
          <select class="form-control" id="projectType" formControlName="projectType">
            <option *ngFor="let type of projectTypes" [value]="type">{{ type | translate }}</option>
          </select>
        </div>
        <div class="col-md-6 form-group" *ngIf="projectForm.get('projectType')?.value === 'Other'">
          <label for="otherProjectType">{{ 'projectOrder.fields.otherProjectType' | translate }} <span class="text-danger">*</span></label>
          <input type="text" class="form-control" id="otherProjectType" formControlName="otherProjectType"
                 [ngClass]="{'is-invalid': projectForm.get('otherProjectType')?.invalid && projectForm.get('otherProjectType')?.touched}">
          <div class="invalid-feedback" *ngIf="projectForm.get('otherProjectType')?.invalid && projectForm.get('otherProjectType')?.touched">
            {{ 'projectOrder.validation.otherProjectTypeRequired' | translate }}
          </div>
        </div>
        <div class="col-md-6 form-group">
          <label for="projectDescription">{{ 'projectOrder.fields.projectDescription' | translate }} <span class="text-danger">*</span></label>
          <textarea class="form-control" id="projectDescription" formControlName="projectDescription" rows="3" placeholder="{{ 'projectOrder.placeholders.projectDescription' | translate }}"
                    [ngClass]="{'is-invalid': projectForm.get('projectDescription')?.invalid && projectForm.get('projectDescription')?.touched}"></textarea>
          <div class="invalid-feedback" *ngIf="projectForm.get('projectDescription')?.invalid && projectForm.get('projectDescription')?.touched">
            <span *ngIf="projectForm.get('projectDescription')?.errors?.['required']">{{ 'projectOrder.validation.projectDescriptionRequired' | translate }}</span>
            <span *ngIf="projectForm.get('projectDescription')?.errors?.['maxlength']">{{ 'projectOrder.validation.maxLength' | translate }}</span>
          </div>
          <small class="form-text text-muted">
            {{ (projectForm.get('projectDescription')?.value?.length || 0) }}/255 characters
          </small>
        </div>
        <div class="col-md-6 form-group">
          <label for="targetAudience">{{ 'projectOrder.fields.targetAudience' | translate }}</label>
          <input type="text" class="form-control" id="targetAudience" formControlName="targetAudience" placeholder="{{ 'projectOrder.placeholders.targetAudience' | translate }}">
        </div>
        <div class="col-md-6 form-group">
          <label for="references">{{ 'projectOrder.fields.references' | translate }}</label>
          <input type="text" class="form-control" id="references" formControlName="references" placeholder="{{ 'projectOrder.placeholders.references' | translate }}">
        </div>
        <div class="col-md-6 form-group">
          <label for="location">{{ 'projectOrder.fields.location' | translate }} <span class="text-danger">*</span></label>
          <input type="text" class="form-control" id="location" formControlName="location"
                 [ngClass]="{'is-invalid': projectForm.get('location')?.invalid && projectForm.get('location')?.touched}">
          <div class="invalid-feedback" *ngIf="projectForm.get('location')?.invalid && projectForm.get('location')?.touched">
            <span *ngIf="projectForm.get('location')?.errors?.['required']">{{ 'projectOrder.validation.locationRequired' | translate }}</span>
            <span *ngIf="projectForm.get('location')?.errors?.['maxlength']">{{ 'projectOrder.validation.maxLength' | translate }}</span>
          </div>
        </div>
        <div class="col-md-12 form-group">
          <label for="speciality">{{ 'projectOrder.fields.speciality' | translate }} <span class="text-danger">*</span></label>
          <textarea class="form-control" id="speciality" formControlName="speciality" rows="3" placeholder="{{ 'projectOrder.placeholders.speciality' | translate }}"
                    [ngClass]="{'is-invalid': projectForm.get('speciality')?.invalid && projectForm.get('speciality')?.touched}"></textarea>
          <div class="invalid-feedback" *ngIf="projectForm.get('speciality')?.invalid && projectForm.get('speciality')?.touched">
            <span *ngIf="projectForm.get('speciality')?.errors?.['required']">{{ 'projectOrder.validation.specialityRequired' | translate }}</span>
            <span *ngIf="projectForm.get('speciality')?.errors?.['maxlength']">{{ 'projectOrder.validation.maxLength' | translate }}</span>
          </div>
          <small class="form-text text-muted">
            {{ (projectForm.get('speciality')?.value?.length || 0) }}/255 characters
          </small>
        </div>
       
      </div>
      
    </div>
  </div>
  
  <!-- Step 3: Sponsorship -->
<div *ngIf="currentStep === 2" class="card mb-3">
    <div class="card-header">{{ 'projectOrder.steps.sponsorship' | translate }}</div>
    <div class="card-body">
      <small class="text-muted">{{ 'projectOrder.mandatoryFieldsNote' | translate }}</small>
      <div class="row">
        <div class="col-md-6 form-group">
          <label for="hasSponsorship">{{ 'projectOrder.fields.hasSponsorship' | translate }} <span class="text-danger">*</span></label>
          <select class="form-control" id="hasSponsorship" formControlName="hasSponsorship">
            <option value="Yes">{{ 'projectOrder.options.yes' | translate }}</option>
            <option value="No">{{ 'projectOrder.options.no' | translate }}</option>
          </select>
        </div>
        <div class="col-md-6 form-group" *ngIf="projectForm.get('hasSponsorship')?.value === 'Yes'">
          <label for="sponsorName">{{ 'projectOrder.fields.sponsorName' | translate }} <span class="text-danger">*</span></label>
          <input type="text" class="form-control" id="sponsorName" formControlName="sponsorName"
                 [ngClass]="{'is-invalid': projectForm.get('sponsorName')?.invalid && projectForm.get('sponsorName')?.touched}">
          <div class="invalid-feedback" *ngIf="projectForm.get('sponsorName')?.invalid && projectForm.get('sponsorName')?.touched">
            {{ 'projectOrder.validation.sponsorNameRequired' | translate }}
          </div>
        </div>
        
        
      </div>
      
    </div>
  </div>
  
  <!-- Step 4: Intellectual Property -->
<div *ngIf="currentStep === 3" class="card mb-3">
    <div class="card-header">{{ 'projectOrder.steps.intellectualProperty' | translate }}</div>
    <div class="card-body">
      <small class="text-muted">{{ 'projectOrder.mandatoryFieldsNote' | translate }}</small>
      <div class="row">
        <div class="col-md-6 form-group">
          <label for="wantsIP">{{ 'projectOrder.fields.wantsIP' | translate }} <span class="text-danger">*</span></label>
          <select class="form-control" id="wantsIP" formControlName="wantsIP">
            <option value="Yes">{{ 'projectOrder.options.yes' | translate }}</option>
            <option value="No">{{ 'projectOrder.options.no' | translate }}</option>
          </select>
        </div>
        <div class="col-md-6 form-group" *ngIf="projectForm.get('wantsIP')?.value === 'Yes'">
          <label for="businessPlan">{{ 'projectOrder.fields.businessPlan' | translate }}</label>
          <input type="file" class="form-control" id="businessPlan" (change)="onFileChange($event, 'businessPlan')">
        </div>
        <div class="col-md-6 form-group" *ngIf="projectForm.get('wantsIP')?.value === 'Yes'">
          <label for="needsBusinessPlan">{{ 'projectOrder.fields.needsBusinessPlan' | translate }} <span class="text-danger">*</span></label>
          <select class="form-control" id="needsBusinessPlan" formControlName="needsBusinessPlan"
                  [ngClass]="{'is-invalid': projectForm.get('needsBusinessPlan')?.invalid && projectForm.get('needsBusinessPlan')?.touched}">
            <option value="Yes">{{ 'projectOrder.options.yes' | translate }}</option>
            <option value="No">{{ 'projectOrder.options.no' | translate }}</option>
          </select>
          <div class="invalid-feedback" *ngIf="projectForm.get('needsBusinessPlan')?.invalid && projectForm.get('needsBusinessPlan')?.touched">
            {{ 'projectOrder.validation.needsBusinessPlanRequired' | translate }}
          </div>
        </div>
        <div class="col-md-6 form-group" *ngIf="projectForm.get('wantsIP')?.value === 'Yes'">
          <label for="businessIdea">{{ 'projectOrder.fields.businessIdea' | translate }} <span class="text-danger">*</span></label>
          <textarea class="form-control" id="businessIdea" formControlName="businessIdea" rows="3"
                    [ngClass]="{'is-invalid': projectForm.get('businessIdea')?.invalid && projectForm.get('businessIdea')?.touched}"></textarea>
          <div class="invalid-feedback" *ngIf="projectForm.get('businessIdea')?.invalid && projectForm.get('businessIdea')?.touched">
            <span *ngIf="projectForm.get('businessIdea')?.errors?.['required']">{{ 'projectOrder.validation.businessIdeaRequired' | translate }}</span>
            <span *ngIf="projectForm.get('businessIdea')?.errors?.['maxlength']">{{ 'projectOrder.validation.maxLength' | translate }}</span>
          </div>
          <small class="form-text text-muted">
            {{ (projectForm.get('businessIdea')?.value?.length || 0) }}/255 characters
          </small>
        </div>
        <div class="col-md-6 form-group" *ngIf="projectForm.get('wantsIP')?.value === 'Yes'">
          <label for="businessIdeaDocument">{{ 'projectOrder.fields.businessIdeaDocument' | translate }}</label>
          <input type="file" class="form-control" id="businessIdeaDocument" (change)="onFileChange($event, 'businessIdeaDocument')">
        </div>
      </div>
     
    </div>
  </div>
  
  <!-- Step 5: Review and Submit -->
<div *ngIf="currentStep === 4" class="card mb-3">
    <div class="card-header">{{ 'projectOrder.steps.reviewAndSubmit' | translate }}</div>
    <div class="card-body">
      <h5>{{ 'projectOrder.reviewYourSubmission' | translate }}</h5>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>{{ 'projectOrder.field' | translate }}</th>
            <th>{{ 'projectOrder.value' | translate }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let field of getFormData()">
            <td>{{ field.label | translate }}</td>
            <td>{{ field.value }}</td>
          </tr>
        </tbody>
      </table>
  
      <!-- Confirmation Statement -->
      <div class="form-group mt-4">
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="confirmationCheckbox" formControlName="confirmationCheckbox">
          <label class="form-check-label" for="confirmationCheckbox">
            {{ 'projectOrder.confirmationStatement' | translate }}
          </label>
        </div>
      </div>
  
      
    </div>
  </div>
  
 <!-- Navigation Buttons -->
<div class="text-center">
    <button type="button" class="btn btn-secondary me-2" *ngIf="currentStep > 0" (click)="previousStep()">
      {{ 'PREVIOUS' | translate }}
    </button>
    <button type="button" class="btn btn-success me-2" *ngIf="currentStep < steps.length - 1" (click)="nextStep()">
      {{ 'CONTINUE' | translate }}
    </button>
    <button type="button" class="btn btn-danger me-2" (click)="onClear()">
      {{ 'CLEAR' | translate }}
    </button>
    <button type="submit" class="btn btn-success" *ngIf="currentStep === steps.length - 1" [disabled]="!projectForm.valid || isSubmitting">
      <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
      {{ isSubmitting ? ('SUBMITTING' | translate) : ('SUBMIT' | translate) }}
    </button>
  </div>
    