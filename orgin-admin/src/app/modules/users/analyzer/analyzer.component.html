<div class="container">
  <h1>{{ 'users.analyzers.title' | translate }}</h1>
  
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <p>{{ 'users.analyzers.loading' | translate }}</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-state">
    <p>{{ 'users.analyzers.error' | translate }}</p>
  </div>

  <!-- Analyzers Table -->
  <div *ngIf="!isLoading && !error">
    <mat-form-field appearance="outline">
      <mat-label>{{ 'common.search' | translate }}</mat-label>
      <input style="color: var(--text-color);" matInput (keyup)="applyFilter($event)" placeholder="{{ 'users.analyzers.searchPlaceholder' | translate }}">
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>

    <div class="table-container" *ngIf="dataSource.filteredData.length > 0">
      <table class="analyzer-table">
        <thead>
          <tr>
            <th>{{ 'users.analyzers.tableHeaders.number' | translate }}</th>
            <th>{{ 'users.analyzers.tableHeaders.name' | translate }}</th>
            <th>{{ 'users.analyzers.tableHeaders.nationalId' | translate }}</th>
            <th>{{ 'users.analyzers.tableHeaders.phone' | translate }}</th>
            <th>{{ 'users.analyzers.tableHeaders.status' | translate }}</th>
            <th>{{ 'users.analyzers.tableHeaders.actions' | translate }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of dataSource.filteredData; let i = index">
            <td>{{ (currentPage * pageSize) + i + 1 }}</td>
            <td>{{ user.name }}</td>
            <td>{{ user.nationalId }}</td>
            <td>{{ user.phone }}</td>
            <td [class.status-disabled]="!user.enabled">
              {{ getStatusText(user.enabled) }}
            </td>
            <td class="actions">
              <button class="icon-button" (click)="viewUserDetails(user)" matTooltip="{{ 'users.analyzers.actions.view' | translate }}">
                <i class="material-icons">visibility</i>
              </button>
              <button class="icon-button" (click)="updateUser(user)" [disabled]="!user.enabled" matTooltip="{{ 'users.analyzers.actions.update' | translate }}">
                <i class="material-icons">edit</i>
              </button>
              <button class="icon-button terminate-btn" [class.enable-btn]="!user.enabled" (click)="terminateUser(user)" matTooltip="{{ user.enabled ? ('users.analyzers.actions.terminate' | translate) : ('users.analyzers.actions.enable' | translate) }}">
                <i class="material-icons">{{ user.enabled ? 'close' : 'check_circle' }}</i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="empty-state" *ngIf="dataSource.filteredData.length === 0">
      <i class="material-icons">people</i>
      <p>{{ 'users.analyzers.noData' | translate }}</p>
    </div>
  </div>
</div>
